---
title: C语言程序设计
description: C语言程序设计-唐浩强(第四版)笔记
categories:
 - C
tags:
 - C
---

# 概述
## C源程序的结构特点
1. 一个C语言源程序可以由一个或多个源文件组成。  
2. 每个源文件可由一个或多个函数组成。  
3. 一个源程序不论由多少个文件组成，都有一个且只能有一个 main 函数，即主函数。   
4. 源程序中可以有预处理命令(include 命令仅为其中的一种)，预处理命令通常应放在源文件或源程序的  
最前面。  
 5. 每一个说明，每一个语句都必须以分号结尾。但预处理命令，函数头和花括号“}”之后不能加分号。     
6. 标识符，关键字之间必须至少加一个空格以示间隔。若已有明显的间隔符，也可不再加空格来间隔。
- - -
## C语言词汇
在C语言中使用的词汇分为六类:标识符，关键字，运算符，分隔符，常量，注释符等。  
1. 标识符 在程序中使用的变量名、函数名、标号等统称为标识符。除库函数的函数名由系统定义外，其余都由用户自定义。C 规定，标识符只能是字母(A~Z，a~z)、数字(0~9)、下划线(_)组成的字符串，并且其第一个 字符必须是字母或下划线。  
以下标识符是合法的:  
a, x, x3, BOOK_1, sum5
以下标识符是非法的:  
3s 以数字开头  
s\*T 出现非法字符\*    
-3x 以减号开头   
bowy-1 出现非法字符-(减号)    
在使用标识符时还必须注意以下几点:  
   1. 标准 C 不限制标识符的长度，但它受各种版本的 C 语言编译系统限制，同时也受到具体机器的限制。  
   例如在某版本 C 中规定标识符前八位有效，当两个标识符前八位相同时，则被认为是同一个标识符。 
   2.在标识符中，大小写是有区别的。例如 BOOK 和 book 是两个不同的标识符。
   3. 标识符虽然可由程序员随意定义，但标识符是用于标识某个量的符号。因此，命名应尽量有相应的意 义，以便于阅读理解，作到“顾名思义”。
2. 关键字  
关键字是由C语言规定的具有特定意义的字符串，通常也称为保留字。用户定义的标识符不应与关键字 相同。C语言的关键字分为以下几类:
    1. 类型说明符
      用于定义、说明变量、函数或其它数据结构的类型。如前面例题中用到的 int,double 等
    2. 语句定义符
    用于表示一个语句的功能。如例 1.3 中用到的 if else 就是条件语句的语句定义符。
    3. 预处理命令字
    用于表示一个预处理命令。如前面各例中用到的 include。
3. 运算符 C语言中含有相当丰富的运算符。运算符与变量，函数一起组成表达式，表示各种运算功能。运算符由一个或多个字符组成。 
4. 分隔符  
在C语言中采用的分隔符有逗号和空格两种。逗号主要用在类型说明和函数参数表中，分隔各个变量。 空格多用于语句各单词之间，作间隔符。在关键字，标识符之间必须要有一个以上的空格符作间隔，否则将 会出现语法错误，例如把 int a;写成 inta;C 编译器会把 inta
当成一个标识符处理，其结果必然出错。
5. 常量  
C 语言中使用的常量可分为数字常量、字符常量、字符串常量、符号常量、转义字符等多种。在后面章 节中将专门给予介绍。
6. 注释符  
C 语言的注释符是以“/\*”开头并以“\*/”结尾的串。在“/\*”和“\*/”之间的即为注释。程序编译时， 不对注释作任何处理。注释可出现在程序中的任何位置。注释用来向用户提示或解释程序的意义。在调试程 序中对暂不使用的语句也可用注释符括起来，使翻译跳过不作处理，待调试结束后再去掉注释符。

- - -

# 程序的灵魂-算法
一个程序应包括：
* 对数据的描述。在程序中要指定数据的类型和数据的组织形式，即数据结构(data structure)。 
* 对操作的描述。即操作步骤，也就是算法(algorithm)。  

数据结构 + 算法 = 程序  
程序 = 算法 + 数据结构 + 程序设计方法 + 语言工具和环境  
## 算法的概念
为解决一个问题而采取的方法和步骤，就称为算法。  
计算机算法:
* 计算机能够执行的算法。  
* 计算机算法可分为两大类:
  * 数值运算算法:求解数值;
  * 非数值运算算法:事务管理领域。

- - -
## 算法的特性
* 有穷性:一个算法应包含有限的操作步骤而不能是无限的。
* 确定性:算法中每一个步骤应当是确定的，而不能应当是含糊的、模棱两可的。 
* 有零个或多个输入。
* 有一个或多个输出。
* 有效性:算法中每一个步骤应当能有效地执行，并得到确定的结果。
   
- - -
## 结构化程序设计方法
* 自顶向下; 
* 逐步细化;
* 模块化设计;
* 结构化编码。

- - -
# 数据类型、运算符与表达式
## C语言的数据类型
对变量的定义可以包括三个方面:
* 数据类型
* 存储类型
* 作用域  

数据类型可分为:  
* 基本数据类型
  * 整形
  * 字符型
  * 实型（浮点型）
    * 单精度型
    * 双精度型
  * 枚举类型
* 构造数据类型
  * 数组类型
  * 结构体类型
  * 共用体类型
* 指针类型
* 空类型  

1. 基本数据类型  
基本数据类型最主要的特点是，其值不可以再分解为其它类型。也就是说，基本数据类 型是自我说明的。
3. 构造数据类型
构造数据类型是根据已定义的一个或多个数据类型用构造的方法来定义的。也就是说， 一个构造类型的值可以分解成若干个“成员”或“元素”。每个“成员”都是一个基本数据类型或又是一 个构造类型。在 C 语言中，构造类型有以下几种:
    * 数组类型
    * 结构体类型
    * 共用体(联合)类型
3. 指针类型:指针是一种特殊的，同时又是具有重要作用的数据类型。其值用来表示某个变量在内存储器中的地址。虽然指针变量的取值类似于整型量，但这是两个类型完全不同的量，因此不能混为一谈。
4. 空类型:在调用函数值时，通常应向调用者返回一个函数值。这个返回的函数值是具有一定的数据类型的，应在函数定义及函数说明中给以说明，例如在例题中给出的 max 函数定义中，函数头为:int max(int a,int b);其中“int ”类型说明符即表示该函数的返回值为整型量。又如在例题中，使用了库函数 sin，由于系统规定其函数返回值为双精度浮点型，因此在赋值语句 s=sin (x);中，s 也必须是双精度浮点型，以便与 sin 函数的返回值一致。所以在说明部分，把 s 说明为双精度浮点型。但是，也有一类函数，调用后并不需要向调用者返回函数值，这种函数可以定义为“空类型”。其类型说明符为 void。在后面函数中还要详细介绍。

- - -
## 常量与变量
对于基本数据类型量，按其取值是否可改变又分为常量和变量两种。在程序执行过程中，其值不发生改变的量称为常量，其值可变的量称为变量。它们可与数据类型结合起来分类。例如，可分为整型常量、整型变量、浮点常量、浮点变量、字符常量、字符变量、枚举常量、枚举变量。在程序中，**常量是可以不经说明而直接引用的，而变量则必须先定义后使用**。  

### 常量和符号常量
* 直接常量(字面常量):
  * 整型常量:12、0、-3;* 
  * 实型常量:4.6、-1.23;
  * 字符常量:‘a’、‘b’。
* 标识符:用来标识变量名、符号常量名、函数名、数组名、类型名、文件名的有效字符序列。
* 符号常量:用标示符代表一个常量。在C语言中，可以用一个标识符来表示一个常量，称之为符号常量。  
符号常量在使用之前必须先定义，其一般形式为:  
  ```c
  #define 标识符 常量
  ```
  其中`#define`也是一条预处理命令(预处理命令都以"#"开头)，称为宏定义命令(在后面预处理程序
  中将进一步介绍)，其功能是把该标识符定义为其后的常量值。一经定义，以后在程序中所有出现该标识符的地方均代之以该常量值。
* 习惯上符号常量的标识符用大写字母，变量标识符用小写字母，以示区别。

- - -
# 指针
## 地址指针的基本概念
内存单元的编号也叫做地址。 既然根据内存单元的编号或地址就可以找到所需的内存单元，所以通 常也把这个地址称为指针。在C语言中，允许用一个变量来存 放指针，这种变量称为指针变量。因此，一个指针变量的值就是某个内存单元的地址或称为某内存单元的指针。
- - -
## 变量的指针和指向变量的指针变量
变量的指针就是变量的地址。存放变量地址的变量是指针变量。即在C语言中，允许用一个变量来存放指针，这种变量称为指针变量。  
在程序中用“*”符号表示“指向”，例如，i_pointer 代表指针变量，而*i_pointer 是 i_pointer 所指向的变量。
因此，下面两个语句作用相同:  
```c
i=3;
*i_pointer=3;  
```
第二个语句的含义是将 3 赋给指针变量 i_pointer 所指向的变量。

### 定义一个指针变量
对指针变量的定义包括三个内容:  
1. 指针类型说明，即定义变量为一个指针变量; 
2. 指针变量名;
3. 变量值(指针)所指向的变量的数据类型。    

其一般形式为:  
类型说明符 *变量名;
```c
int *p2; // 指向整型变量的指针变量
float *p3; // 指向浮点变量的指针变量
char *p4; // 指向字符变量的指针变量
```
> 应该注意的是，一个指针变量只能指向同类型的变量，如 P3 只能指向浮点变量，不能时而指向一个浮
点变量，时而又指向一个字符变量。

- - -
### 指针变量的引用
指针变量的赋值只能赋予地址，决不能赋予任何其它数据，否则将引起错误。  
在C语言中，变量的地址是由编译系统分配的，对用户完全透明，用户不知道变量的具体地址。  
两个有关的运算符:  
1. &:取地址运算符。
2. *:指针运算符(或称“间接访问”运算符)。    

C语言中提供了地址运算符&来表示变量的地址。其一般形式为:  
`&变量名;`    
如&a 表示变量 a 的地址，&b 表示变量 b 的地址。变量本身必须预先说明。  
设有指向整型变量的指针变量 p，如要把整型变量 a 的地址赋予 p 可以有以下两种方式: 
1. 指针变量初始化的方法
    ```c
    int a;
    int *p=&a; 
    ```
2. 赋值语句的方法
    ```c
    int a;
    int *p;
    p=&a; 
    ```

不允许把一个数赋予指针变量，故下面的赋值是错误的: 
```c
int *p;  
p=1000;
```
被赋值的指针变量前不能再加`*`说明符，如写为`*p=&a`也是错误的。  

假设：
```c
int i=200, x;
int *ip;
```
此后我们就可以通过`ip`间接访问变量i，例如：`x=*ip`  
指针的指向是可以改变的，如：
```c
int i,j,*p1,*p2;
i='a';
j='b';
p1=&i;
p2=&j;
```
此时执行`p2=p1`就会使p2与p1一同指向i  
如果执行`*p2=*p1`则表示把p1指向的内容赋给p2所指的区域，相当于`j=i`


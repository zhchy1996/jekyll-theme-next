---
title: vim(2)
description: vim实用技巧笔记第二部分包括动作命令
categories:
- 实用工具
tags:
- 工具
---

### 管理文件
vim允许同时在多个文件上工作。

#### 用缓冲区列表管理打开的文件
> 在一次编辑会话中，可以打开多个文件。用Vim的缓冲区列表可以对这些文件进行管理。  

> 此章内容基本只能用于原生vim，编辑器已经提供了很好的文件管理功能，所以略过此处。

- - - -
### 用动作命令在文档中移动
#### 让手指保持在本位行上
使用`hjkl`可以进行左下上右的移动

- - - -
#### 区分实际行与屏幕行
有时编辑器为了展示一行的完整内容会在屏幕上换行展示，而上面提到的命令是换实际行下面的表格对相关命令进行了总结

命令|光标动作
-|-
`j`|向下移动一个实际行
`gj`|向下移动一个屏幕行
`k`|向上移动一个实际行
`gk`|向上移动一个屏幕行
`0`|移动到实际行的行首
`g0`|移动到屏幕行的行首
`^`|移动到实际行的第一个非空白字符
`g^`|移动到屏幕行的第一个非空白字符
`$`|移动到实际行的行尾
`g$`|移动到屏幕行的行尾

- - - -
#### 基于单词移动

命令|动作
-|-
`w`|正向移动到下一单词开头
`b`|正向移动到当前单词/上一单词开头
`e`|正向移动到当前单词/下一单词的结尾
`ge`|正向移动到上一单词开头

##### 理解单词和字符串
我们经常提到单词，但迄今为止，我们都一直未定义过究竟什么是一个单词。Vim 对此有两种不同的定义，并且分别用“单词”（word）和“字串”（WORD）对其进行区分。我们之前遇到过的每个面向单词的动作命令，都有一个面向字串的命令与其对应，这当中包括 W 、B 、E 和 gE 。  
一个单词由字母、数字、下画线，或其他非空白字符的序列组成，单词间以空白字符分隔（参见 :h word  ）。字串的定义则更简单，它由非空白字符序列组成，字串间以空白字符分隔

- - - -
#### 对字符进行查找

命令|用途
-|-
`f{char}`|正向移动到下一个{char}所在处
`F{char}`|反向移动到下一个{char}所在处
`t{char}`|正向移动到下一个{char}所在处所在的前一个字符上
`T{char}`|反向移动到下一个{char}所在处所在的后一个字符上
`;`|重复上次的字符查找命令
`,`|反转方向查找上次的字符查找命令

- - - -
#### 通过查找进行移动
可以通过`/{char}`去跳转到其他行的字符,比如：  
```bash
search for your target
it only takes a moment
to get where you want
#删除taskes到to的内容
```
可以直接使用`d/ge`完成

- - - -
#### 用精确的文本对象选择选区
文本对象允许操作括号、被引用的文本、XML标签以及其他文本中的常见结构。  
Vim 的文本对象由两个字符组成，第一个字符永远是`i`或是`a`。一般以`i`开头的文本对象会选择分隔符内部的文本，而以`a`开头的文本对象会选择包括分隔符在内的整个文本。为了便于记忆，可以把`i`想成“inside”，而把`a`想成“around”或“all”。

文本对象|区域|文本对象|区域
-|-|-|-
`a)或ab`|一对圆括号|`i)或ib`|圆括号内部
`a}或aB`|-|`i}或iB`|-
`a]`|-|`i]`|-
`a>`|-|`i]`|-
`a'`|-|`i]`|-
`a`|-|`i`|-
`a`|-|`i`|-
`at`|-|`it`|-


##### 用文本对象执行操作
文本对象自身并不是动作命令，不能用它们在文档中移动。但是却可以在可视模式及操作符待决模式中使用文本对象。记住：每当在命令语法里看到`{motion}`时，也可以在这个地方使用文本对象，常见的例子包括`d{motion} 、c{motion} 和 y{motion}`，更多命令看第二章表。

- - - -
#### 删除周边，修改内部
范围文本对象  

文本对象|选择范围
-|-
iw|当前单词
aw|当前单词及一个空格
iW|当前字符串
aW|当当前字符串及一个空格
is|当前句子
as|当前句子及一个空格
ip|当前段落
ap|当前段落及一个空行

> 上面这些命令对中文的支持都非常不好，因为vim评判单词，字符串，等的标准是英文的符号和空格  

一般来说，`d{motion}`命令和`aw 、as 和 ap`配合起来使用比较好，而`c{motion}`命令和`iw`及类似的文本对象一起用效果会更好。

- - - -
#### 设置位置标记，以便快速跳回
Vim 的位置标记允许我们快速跳转到文档中感兴趣的地方。可以手动设置位置标记，不过 Vim 也会自动记录某些感兴趣的位置点。  

`m{a-zA-z}`命令会用选定的字母标记当前光标所在的位置。小写位置标记只在每个缓冲区局部可见，大写标记则全局可见。  
普通模式提供了两个命令来跳转到一个位置标记上:`'{mark}`命令跳到位置标记所在行，`{mark}命令则把光标移动到设置此位置标记时光标所在之处。  
##### 自动位置标记

位置标记|跳转到
-|-
``|当前文件中上次跳转动作之前的位置
`.|上次修改的地方
`^|上次插入的地方
`[|上次修改或复制的起始位置
`]|上次修改或复制的结束位置
`<|上次高亮选区的起始位置
`>|上次高亮选区的结束位置

- - - -
#### 在匹配括号间跳转
`%`命令允许在一组开、闭括号间跳转，它可作用于`()、{}以及[]`。  
如果想把`cities = %w{London Berlin New\ York}`改为`cities = [London Berlin New\ York]`，可以这么做，`dt{` -> `%` -> `r]` -> <code>``</code> -> `r[`
- - - -

### 在文件间跳转
本章在编译器中无法使用，故不过多介绍

- - - -

### 复制与粘贴
#### 用无名寄存器实现删除、复制与粘贴操作
通常情况下，在讨论剪切、复制与粘贴这3组操作时，指的都是操作系统剪贴板。不过，在Vim的术语里，我们操作的是寄存器，而并非剪贴板。  

##### 调换字符
在想调换的一个字符上使用`xp`命令，`x`可以将第一个字符剪切下来，并放到无名寄存器中，`p`命令可以把无名寄存器中的内容粘贴到光标后面。  

##### 调换文本行
`ddp`可以调换文本行，原理同上

##### 创建文本行的副本
`yyp`可以实现

- - - -
#### 深入理解Vim寄存器
Vim不使用单一的剪贴板进行剪切、复制与粘贴操作，而是为这些操作提供了多组寄存器。当使用删除、复制与粘贴命令时，可以明确指定它们中的某一个进行操作。

##### 引用一个寄存器
Vim的删除、复制与粘贴命令都会用到众多寄存器中的某一个。可以通过给命令加`"{register}`前缀的方法指定要用的寄存器。若不指名，Vim将默认使用无名寄存器。

> Vim术语对照表  
剪切（cut）、复制（copy）与粘贴（paste）这些都是众所周知的术语，而且大多数桌面软件和操作系统都支持这３类操作。Vim当然也提供这些功能，只不过使用的是另外的术语delete、yank与put 。  
Vim的put命令与粘贴操作完全相同。幸运的是，两词均以字母p开头，因此即使术语不同，也不会影响记忆。  
Vim的yank命令也等同于复制操作。但由于历史原因，当时c命令已经被用于修改（change）操作了，因此Vi的作者们被迫选择了另一个名字yank。由于那时y键还可用，因此它就成了复制操作的命令。  
Vim的delete命令也与标准剪切操作的作用一致。也就是说，该命令会先把指定文本复制到寄存器后再从文档中删掉。能够理解这一点，是避开类似 糟糕！我弄丢了复制内容 所遇到的常见陷阱的关键。  
你也许好奇，Vim中真正删除文本的操作是什么。也就是说，我们怎样才能删除文本而不把其内容复制到任何寄存器？答案是使用名为“黑洞”的特殊寄存器，顾名思义，放到这里的文本真的是有去无回了。用下画线符号可以引用黑洞寄存器。因此，`"_d{motion}`会执行真正的删除操作。  

##### 无名寄存器("")
`""`可以指定使用无名寄存器，例如`""p`完全等于`p`。

##### 复制专用寄存器("0)
当使用`y{motion}`命令时，要复制的文本也会被拷贝到复制专用寄存器中，可用0引用，它不会被`x,s,c,d`覆盖

##### 有名寄存器("a - "z)
遇到将一段或多段文本粘贴到多处的情况，有名寄存器就会大显神通。

##### 黑洞寄存器
当想彻底删除的时候可以使用`"_`来引用黑洞寄存器，这时不会覆盖掉无名寄存器的内容。

##### 系统剪切板("+)与选择专用寄存器("*)
如果想要把vim外部的内容粘贴到vim内，或者想将vim中的内容粘贴到外部可以使用
---
title: vim
description: vim实用技巧笔记
categories:
- 实用工具
tags:
- 工具
---

### Vim解决问题的方式
#### `.`命令
* 通过`.`命令重复之前的操作
* 通过`x`命令删除当前光标所在字符
* 通过`u`命令撤销修改
* 通过`dd`命令删除整行
* `>G`命令增加从当前行到文档末尾处的缩进层级  

- - - -  

#### 不要自我重复
* `A`命令可以进入插入模式并把光标移动至行尾(相当于`a$`)  
    如果想在每行末尾添加一个分号可以执行`A j . . .`
* `C = c$` 删除光标到行尾字符，并进入插入模式
* `s = cl` 删除光标所在字符，并进入插入模式
* `S = ^c` 删除整行，并进入插入模式
* `I = ^i` 将光标移至行首，并计入插入模式
* `o = A<CR>` 另起一行(在当前行下方)，并进入插入模式
* `O = ko` 在当前行上方  

- - - -
#### 以退为进
* 通过`f{char}`来快速跳转到特定字符
* 通过`;`来重复之前的`f`命令3  

- - - -
#### 执行、重复、回退  

|目的|操作|重复|回退|
|-|-|-|-|
|做出一个修改|{edit}|.|u|
|在行内查找下一指定字符|f{char}/t{char}|;|,|
|在行内查找上一指定字符|F{char}/T{char}|;|,|
|在文档中查找下一处匹配项 | /pattern | n | N |
|在文档中寻找上一处匹配项 | ？pattern | n | N |
|执行替换 | :s/target/replacement | & | u |
|执行一系列修改 | qx{changes}q | @x | u |

- - - -
#### 查找并手动替换
* 在单词上使用`*`命令可以查找当前光标下的单词
* 使用n可以移动到下一个
* 使用cw可以删除从光标位置到单词结尾间的字符
  
- - - -
#### 认识.范式
用一次按键移动，另一次按键执行

- - - -
### 普通模式
<br>

#### 停顿时请移开画笔
在其他编辑器中大多数时间都处于类似vim的插入模式中，而在vim中大多数时候处于普通模式，作者使用了一个非常好的比喻：用画笔作画就像是插入模式，而作家在思考构图，选择颜色时是不会把画笔停在画布上的。
普通模式很明显与思考的情况很契合，所以使用vim应该适应普通模式带来的变化。

- - - -
#### 把撤销单元切成块
> 在其他编辑器中，输入一些词后使用撤销命令，可能会撤销最后输入的词或字符，然而在Vim中，我们自己可以控制撤销的粒度。

`u`键会触发撤销命令，它会撤销最新的修改。一次修改可以是改变文档内文本的任意操作，其中包括在普通模式、可视模式以及命令行模式中所触发的命令，而且一次修改也包括了在插入模式中输入（或删除）的文本，因此我们也可以说，`i{insert some text}<Esc>`是一次修改。
所以养成输入完一些内容后退出插入模式也是应该养成的习惯。

- - - -
#### 构造可重复的修改
如何删除一个单词（当前光标在单词尾部）
* `db`删除从光标起始位置到单词开头的内容`x`删掉剩余的字母
* `b`将光标移动到单词开头`dw`删除从光标到结尾的单词内容
* `daw`删除整个单词
> 综合以上的一些命令我们可以做一些总结  
> `c`命令的含义是清除一些内容并进入插入模式  
> `d`命令的含义是清除一些内容但是不进入插入模式  
> `w b l`本身的含义是移动分别是移动到单词末尾，移动到单词首部，向后移动一位，结合`c d`命令就可以删除到指定位置  
> `$ ^`也可以做修饰，作用是到行尾和到行首  
> `aw`比较特殊，它的作用是删除整个单词

- - - -
#### 用次数做简单的算数运算
很多命令我们都可以通过在命令前面加*数字*来重复命令
*`<C-a>`和`<C-x>`命令分别对数字执行加和减操作，如果当前光标位置不是数字它会在本行向后查找第一个数字
* 如果在上面的两个命令前加数字就可以实现增加减少对应数值
* `yyp`命令可以复制当前行
> vim遇到0开头的数字会按8进制分析

- - - -
#### 能重复，就别用次数
通常来说重复能带来更多的复用性和可操作性（方便撤销），但是如果是确定的操作，比如一个数字加减多少或者将两个单词改成其他单词，这种情况下使用次数就要优于重复了。

- - - -
#### 双剑合璧，天下无敌
##### 操作符 + 动作命令 = 操作  
`d{motion}`命令可以对一个字符（dl）、一个完整单词（daw）或一整个段落（dap）进行操作，它作用的范围由动作命令决定。`c{motion}`、`y{motion}`以及其他一些命令也类似，它们被统称为操作符（operator）。可以用`:h operator`命令来查看完整列表，下面是一些比较常见的操作符。  
 
命令|用途
-|-
c|修改
d|删除
y|复制到寄存器
g~|反转大小写
gu|转换为大写
gU|转化为大写
>|增加缩进
<|减小缩进
=|自动缩进
!|使用外部程序过滤{motion}所跨越的行

下面是一些比较常见的动作命令  

|命令|用途|
|-|-|
|l|一个字符|
|w|从当前位置到光标末尾|
|b|从当前位置到单词首部|
|aw|整个单词|
|ap|整个段落|
|$|到行尾|
|^|到行首|

当一个操作命令被重复两次时会作用于当前行，所以`dd`是删除当前行，`>>` 是缩进当前行。`gU`命令(`gu`)是特殊情况，你既可以使用`gUgU`也可以使用`gUU`。
> 输入操作符后等待接受动作命令的状态可以被称为待决模式，当这个模式被激活时也可以通过`<Esc>`键退出

- - - -
#### 插入模式
















